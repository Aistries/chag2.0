<!DOCTYPE html>
<html>
<head>
    <title>User Login</title>
    <!-- Include Bootstrap CSS and JS -->
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <h1>Welcome to the Login Page</h1>

    <!-- Login Button Triggering Modal -->
    <button id="login-btn" class="btn btn-primary">Login</button>

    <!-- Login Modal -->
    <div id="login-modal" class="modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">User Login</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="login-form">
                        <label for="email">Email:</label>
                        <input type="email" id="email" required><br>
    
                        <label for="password">Password:</label>
                        <input type="password" id="password" required><br>
    
                        <button type="submit" class="btn btn-primary">Login</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-auth.js"></script>

    <script>
        // Firebase SDK configuration (same as in your registration.html)
        const firebaseConfig = {
            apiKey: "AIzaSyCN4TPr6Kh4FvBPtVpRYQ3zC1ie9VOyqSU",
          authDomain: "quick-cash-81b2f.firebaseapp.com",
          projectId: "quick-cash-81b2f",
        };

        // Initialize Firebase
        const { initializeApp } = firebase;
        const app = initializeApp(firebaseConfig);

        // Show the login modal when clicking the login button
        const loginBtn = document.getElementById('login-btn');
        const loginModal = new bootstrap.Modal(document.getElementById('login-modal'));

        loginBtn.addEventListener('click', () => {
            loginModal.show();
        });

        const loginForm = document.getElementById('login-form');

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            // Authenticate the user with Firebase Authentication
            firebase.auth(app).signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // User authenticated successfully
                    const user = userCredential.user;
                    console.log('User authenticated:', user);

                    // Redirect the user to the main page or wherever you want
                    alert("Welcome, " + email);
                    window.location.href = 'mainchag.html';
                })
                .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    alert("Login error: " + errorMessage);
                    console.error('Login error:', errorCode, errorMessage);
                });
        });
    </script>
</body>
</html>
